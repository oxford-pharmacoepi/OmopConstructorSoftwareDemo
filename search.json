[
  {
    "objectID": "index.html#omopconstructor",
    "href": "index.html#omopconstructor",
    "title": "OmopConstructor",
    "section": "OmopConstructor",
    "text": "OmopConstructor"
  },
  {
    "objectID": "index.html#omopconstructor-1",
    "href": "index.html#omopconstructor-1",
    "title": "OmopConstructor",
    "section": "OmopConstructor",
    "text": "OmopConstructor\nYou can install OmopConstructor from GitHub:\n\n\nlibrary(pak)\npkg_install(\"ohdsi/OmopConstructor\")\n\n\n\nIt has been submitted to CRAN and it should be updated there soon!\n\n\nThe documentation and vignettes of the packages can be found in our page: https://ohdsi.github.io/OmopConstructor/"
  },
  {
    "objectID": "index.html#motivation",
    "href": "index.html#motivation",
    "title": "OmopConstructor",
    "section": "Motivation",
    "text": "Motivation"
  },
  {
    "objectID": "index.html#lets-get-started",
    "href": "index.html#lets-get-started",
    "title": "OmopConstructor",
    "section": "Let’s get started",
    "text": "Let’s get started\nFor this presentation we will use the GiBleed dataset from omock.\n\nlibrary(omock)\ncdm &lt;- mockCdmFromDataset(datasetName = \"GiBleed\", source = \"duckdb\")\n\n\n\ncdm\n\n\n\n\n── # OMOP CDM reference (duckdb) of GiBleed ────────────────────────────────────────────────────────────────────────────\n\n\n• omop tables: care_site, cdm_source, concept, concept_ancestor, concept_class, concept_relationship, concept_synonym,\ncondition_era, condition_occurrence, cost, death, device_exposure, domain, dose_era, drug_era, drug_exposure,\ndrug_strength, fact_relationship, location, measurement, metadata, note, note_nlp, observation, observation_period,\npayer_plan_period, person, procedure_occurrence, provider, relationship, source_to_concept_map, specimen, visit_detail,\nvisit_occurrence, vocabulary\n\n\n• cohort tables: -\n\n\n• achilles tables: -\n\n\n• other tables: -"
  },
  {
    "objectID": "index.html#the-cdm-reference-object",
    "href": "index.html#the-cdm-reference-object",
    "title": "OmopConstructor",
    "section": "The cdm reference object",
    "text": "The cdm reference object\nIf you are not familiar with the cdm_reference object you can take a look to its formal definition: cdm_reference.\n\nWe usually would use the CDMConnector package to create a cdm_reference to our database."
  },
  {
    "objectID": "index.html#characterisation-of-the-observation-period",
    "href": "index.html#characterisation-of-the-observation-period",
    "title": "OmopConstructor",
    "section": "Characterisation of the observation period",
    "text": "Characterisation of the observation period\n\ncdm$observation_period\n\n# Source:   table&lt;observation_period&gt; [?? x 5]\n# Database: DuckDB 1.4.0 [unknown@Linux 6.11.0-1018-azure:R 4.4.1//tmp/RtmpANlfTn/file2bc89560610.duckdb]\n   observation_period_id person_id observation_period_start_date observation_period_end_date period_type_concept_id\n                   &lt;int&gt;     &lt;int&gt; &lt;date&gt;                        &lt;date&gt;                                       &lt;int&gt;\n 1                     6         6 1963-12-31                    2007-02-06                                44814724\n 2                    13        13 2009-04-26                    2019-04-14                                44814724\n 3                    27        27 2002-01-30                    2018-11-21                                44814724\n 4                    16        16 1971-10-14                    2017-11-02                                44814724\n 5                    55        55 2009-05-30                    2019-03-23                                44814724\n 6                    60        60 1990-11-21                    2019-01-23                                44814724\n 7                    42        42 1909-11-03                    2019-03-13                                44814724\n 8                    33        33 1986-05-12                    2018-09-10                                44814724\n 9                    18        18 1965-11-17                    2018-11-07                                44814724\n10                    25        25 2007-03-18                    2019-04-07                                44814724\n# ℹ more rows"
  },
  {
    "objectID": "index.html#characterisation-of-the-observation-period-1",
    "href": "index.html#characterisation-of-the-observation-period-1",
    "title": "OmopConstructor",
    "section": "Characterisation of the observation period",
    "text": "Characterisation of the observation period\nWe will use OmopSketch to characterise the current observation period.\n\n\nlibrary(OmopSketch)\nresult &lt;- summariseInObservation(cdm$observation_period, interval = \"years\", sex = TRUE)\nplotInObservation(result, colour = \"sex\")"
  },
  {
    "objectID": "index.html#characterisation-of-the-observation-period-2",
    "href": "index.html#characterisation-of-the-observation-period-2",
    "title": "OmopConstructor",
    "section": "Characterisation of the observation period",
    "text": "Characterisation of the observation period\n\nresult &lt;- summariseObservationPeriod(cdm$observation_period)\ntableObservationPeriod(result)\n\n\n\n\n\n\n\n\n\n\n\n\n\nObservation period ordinal\nVariable name\nEstimate name\n\nCDM name\n\n\n\nGiBleed\n\n\n\n\nall\nNumber records\nN\n2,694\n\n\n\nNumber subjects\nN\n2,694\n\n\n\nRecords per person\nmean (sd)\n1.00 (0.00)\n\n\n\n\nmedian [Q25 - Q75]\n1 [1 - 1]\n\n\n\nDuration in days\nmean (sd)\n21,602.60 (5,460.69)\n\n\n\n\nmedian [Q25 - Q75]\n20,872 [17,495 - 24,702]\n\n\n1st\nNumber subjects\nN\n2,694\n\n\n\nDuration in days\nmean (sd)\n21,602.60 (5,460.69)\n\n\n\n\nmedian [Q25 - Q75]\n20,872 [17,495 - 24,702]"
  },
  {
    "objectID": "index.html#build-observation-period",
    "href": "index.html#build-observation-period",
    "title": "OmopConstructor",
    "section": "Build observation period",
    "text": "Build observation period\n\nlibrary(OmopConstructor)\ncdm &lt;- buildObservationPeriod(cdm = cdm)\n\nℹ Using censor date as 2019-05-25 from source_release_date.\n\n\n\n\ncdm$observation_period\n\n# Source:   table&lt;results.test_observation_period&gt; [?? x 5]\n# Database: DuckDB 1.4.0 [unknown@Linux 6.11.0-1018-azure:R 4.4.1//tmp/RtmpANlfTn/file2bc89560610.duckdb]\n   observation_period_id person_id observation_period_start_date observation_period_end_date period_type_concept_id\n                   &lt;int&gt;     &lt;int&gt; &lt;date&gt;                        &lt;date&gt;                                       &lt;int&gt;\n 1                     1         1 1953-02-06                    2019-05-25                                   32817\n 2                     2         2 1920-07-01                    2019-05-25                                   32817\n 3                     3         3 1923-12-22                    2019-05-25                                   32817\n 4                     4         5 1968-10-30                    2019-05-25                                   32817\n 5                     5         6 1964-04-07                    2019-05-25                                   32817\n 6                     6         7 1968-12-06                    2019-05-25                                   32817\n 7                     7         9 1978-10-26                    2019-05-25                                   32817\n 8                     8        11 1955-01-11                    2019-05-25                                   32817\n 9                     9        12 1963-05-08                    2019-05-25                                   32817\n10                    10        16 1972-01-19                    2019-05-25                                   32817\n# ℹ more rows"
  },
  {
    "objectID": "index.html#characterise-observation-period",
    "href": "index.html#characterise-observation-period",
    "title": "OmopConstructor",
    "section": "Characterise observation period",
    "text": "Characterise observation period"
  },
  {
    "objectID": "index.html#first-to-last",
    "href": "index.html#first-to-last",
    "title": "OmopConstructor",
    "section": "First to last",
    "text": "First to last\n\ncdm &lt;- buildObservationPeriod(\n  cdm = cdm,\n  collapseDays = Inf,\n  persistenceDays = 0\n)\n\nℹ Using censor date as 2019-05-25 from source_release_date.\n\nresult2 &lt;- summariseInObservation(cdm$observation_period, interval = \"years\", output = \"person-days\") |&gt;\n  mutate(cdm_name = \"First to last\")"
  },
  {
    "objectID": "index.html#only-ongoing-visit",
    "href": "index.html#only-ongoing-visit",
    "title": "OmopConstructor",
    "section": "Only ongoing visit",
    "text": "Only ongoing visit\n\ncdm &lt;- buildObservationPeriod(\n  cdm = cdm,\n  collapseDays = 0,\n  persistenceDays = 0,\n  recordsFrom = \"visit_occurrence\"\n)\n\nℹ Using censor date as 2019-05-25 from source_release_date.\nℹ `persistenceDays` (0) can not be equal to `collapseDays` (0) as back to back observation periods are not allowed,\n  setting `collapseDays = 1`.\n\nresult3 &lt;- summariseInObservation(cdm$observation_period, interval = \"years\", output = \"person-days\") |&gt;\n  mutate(cdm_name = \"Inpatient\")"
  },
  {
    "objectID": "index.html#ongoing-record",
    "href": "index.html#ongoing-record",
    "title": "OmopConstructor",
    "section": "Ongoing record",
    "text": "Ongoing record\n\ncdm &lt;- buildObservationPeriod(\n  cdm = cdm,\n  collapseDays = 0,\n  persistenceDays = 0,\n  recordsFrom = c(\"visit_occurrence\", \"drug_exposure\", \"condition_occurrence\", \"procedure_occurrence\")\n)\n\nℹ Using censor date as 2019-05-25 from source_release_date.\nℹ `persistenceDays` (0) can not be equal to `collapseDays` (0) as back to back observation periods are not allowed,\n  setting `collapseDays = 1`.\n\nresult4 &lt;- summariseInObservation(cdm$observation_period, interval = \"years\", output = \"person-days\") |&gt;\n  mutate(cdm_name = \"Ongoing record\")"
  },
  {
    "objectID": "index.html#collapse-by-365",
    "href": "index.html#collapse-by-365",
    "title": "OmopConstructor",
    "section": "Collapse by 365",
    "text": "Collapse by 365\n\ncdm &lt;- buildObservationPeriod(\n  cdm = cdm,\n  collapseDays = 365,\n  persistenceDays = 0,\n  recordsFrom = c(\"visit_occurrence\", \"drug_exposure\", \"condition_occurrence\", \"procedure_occurrence\")\n)\n\nℹ Using censor date as 2019-05-25 from source_release_date.\n\nresult5 &lt;- summariseInObservation(cdm$observation_period, interval = \"years\", output = \"person-days\") |&gt;\n  mutate(cdm_name = \"Collapse 365\")"
  },
  {
    "objectID": "index.html#collapse-by-365-and-persistence",
    "href": "index.html#collapse-by-365-and-persistence",
    "title": "OmopConstructor",
    "section": "Collapse by 365 and persistence",
    "text": "Collapse by 365 and persistence\n\ncdm &lt;- buildObservationPeriod(\n  cdm = cdm,\n  collapseDays = 365,\n  persistenceDays = 365,\n  recordsFrom = c(\"visit_occurrence\", \"drug_exposure\", \"condition_occurrence\", \"procedure_occurrence\")\n)\n\nℹ Using censor date as 2019-05-25 from source_release_date.\nℹ `persistenceDays` (365) can not be equal to `collapseDays` (365) as back to back observation periods are not allowed,\n  setting `collapseDays = 366`.\n\nresult6 &lt;- summariseInObservation(cdm$observation_period, interval = \"years\", output = \"person-days\") |&gt;\n  mutate(cdm_name = \"Collapse 365 + persistence\")"
  },
  {
    "objectID": "index.html#reliability-and-extraction-date",
    "href": "index.html#reliability-and-extraction-date",
    "title": "OmopConstructor",
    "section": "Reliability and extraction date",
    "text": "Reliability and extraction date\n\ncdm &lt;- buildObservationPeriod(\n  cdm = cdm,\n  collapseDays = 730,\n  persistenceDays = 730,\n  dateRange = c(\"1990-01-01\", \"2009-12-31\"),\n  recordsFrom = c(\"visit_occurrence\", \"drug_exposure\", \"condition_occurrence\", \"procedure_occurrence\")\n)\n\nℹ `persistenceDays` (730) can not be equal to `collapseDays` (730) as back to back observation periods are not allowed,\n  setting `collapseDays = 731`.\n\nresult7 &lt;- summariseInObservation(cdm$observation_period, interval = \"years\", output = \"person-days\") |&gt;\n  mutate(cdm_name = \"Collapse 730 + persistence\")"
  },
  {
    "objectID": "index.html#combine-and-compare",
    "href": "index.html#combine-and-compare",
    "title": "OmopConstructor",
    "section": "Combine and compare",
    "text": "Combine and compare\n\nresult &lt;- bind(result0, result1, result2, result3, result4, result5, result6, result7)\nplotInObservation(result = result, colour = \"cdm_name\")"
  },
  {
    "objectID": "index.html#future-steps",
    "href": "index.html#future-steps",
    "title": "OmopConstructor",
    "section": "Future steps",
    "text": "Future steps\n\nbuildDrugEra()\nbuildConditionEra()\ncdmSample()\n…"
  },
  {
    "objectID": "index.html#omopconstructor-2",
    "href": "index.html#omopconstructor-2",
    "title": "OmopConstructor",
    "section": "OmopConstructor",
    "text": "OmopConstructor\n\n\n👉 Packages website\n👉 CRAN link Soon 👉 Manual Soon\n📧 marti.catalasabate@ndorms.ox.ac.uk"
  }
]